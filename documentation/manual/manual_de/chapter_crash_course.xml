<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE chapter PUBLIC "-//OASIS//DTD DocBook XML V4.4//EN"
    "http://www.oasis-open.org/docbook/xml/4.4/docbookx.dtd">
<chapter id="crash_course">
	<title>Crash-Kurs</title>
	
	<para>
		Die Erstellung von Webseiten mit Oak ist auf den ersten Blick nicht
		ganz einfach. Dies liegt vor allem daran, dass etliche Komponenten
		an der Anzeige einer Seite mitwirken und sie darum entsprechend
		konfiguriert werden müssen. In diesem Crash-Kurs geht es darum,
		Sie ohne grosse Umschweife an die Erstellung einer einfachen 
		Webseite heranzuführen, ohne sich zu intensiv mit dem Wieso und Warum
		zu beschäftigen. Allerdings sind an vielen Stellen die ausführlichen
		Beschreibungen, die an anderer Stelle in diesem Handbuch vorkommen,
		referenziert.
	</para>
	
	<para>
		Zur Umsetzung haben wir eine Test-Webseite erstellt, die weder besonders
		hübsch noch besonders aussergewöhnlich ist, dafür einfach genug, um
		nicht den Blick auf das Wesentliche zu trüben &ndash; die Bedienung
		von Oak.
	</para>
	
	<figure id="crash_course.demo_website">
		<title>Screenshot der Demo-Webseite</title>
		<graphic fileref="images/crash_course.demo_website.png"/>
	</figure>
	
	<para>
		Die wichtigsten Code-Fragmente sind auch hier im Handbuch zu finden. 
		Sie sollten zum Verständnis des Vorgehens ausreichend sein, sind aber
		nicht komplett, sodass sich nicht die gesamte Demo-Webseite damit
		nachvollziehen lässt. Wer alle Schritte komplett nachvollziehen möchte,
		kann den Quellcode der Demo-Webseite vom Oak-Download-Server beziehen.
	</para>
	
	<note>
		<para>
			Sollten Sie Probleme beim Verständnis der Beispiele haben,
			schlagen Sie die Detail-Erklärungen im Handbuch nach. Sollte
			dies nicht ausreichen, können Sie sich an die User-Community
			wenden. Dort sind viele Leute versammelt, die bereits mit
			Oak arbeiten und Ihnen bei Ihren Verständnisproblemen helfen
			können.
		</para>
	</note>
	
	<sect1 id="crash_course.preparation">
		<title>Vorbereitungen</title>
		
		<para>
			Wer sich die Demo-Webseite anschaut, sieht, dass sie einfach
			aufgebaut ist: Eine Navigation oben, drei Inhaltsseiten mit
			Fliesstext und ein Kontaktformular. Bevor damit begonnen werden
			kann, die Navigation und die einzelnen Seiten anzulegen, muss
			zuerst ein <foreignphrase>Template Set</foreignphrase> erzeugt
			werden &ndash; denn ohne <foreignphrase>Template Set</foreignphrase>
			kann keine Seite angelegt werden.
		</para>
		
		<para>
			Um ein <foreignphrase>Template Set</foreignphrase> anzulegen,
			klicken Sie zuerst auf den Navigationspunkt
			<guibutton>Templating</guibutton> und dann auf den Unterabschnitt
			<guibutton>Template Sets</guibutton>. Von dort gelangen Sie über
			den Link <guibutton>Add new</guibutton> zur Eingabemaske, um ein
			neues <foreignphrase>Template Set</foreignphrase> anzulegen. 
		</para>
		
		<variablelist>
			<varlistentry>
				<term>Name</term>
				<listitem>
					<para>
						Geben Sie in das Feld <guilabel>Name</guilabel> einen
						Namen für das <foreignphrase>Template Set</foreignphrase>
						an. Wählen Sie einen möglichst beschreibenden Namen
						wie <userinput>Standardaussehen</userinput>. 
					</para>
				</listitem>
			</varlistentry>
			<varlistentry>
				<term>Description</term>
				<listitem>
					<para>
						In das Feld <guilabel>Description</guilabel> können
						Sie optional einen Beschreibungstext für das
						<foreignphrase>Template Set</foreignphrase> angeben,
						der dessen Verwendungszweck näher beschreibt. Dies
						bietet sich bei der Verwendung von nur einem
						<foreignphrase>Template Set</foreignphrase> wie jetzt
						weniger an, kann bei grösseren Webseiten mit vielen
						<foreignphrase>Template Sets</foreignphrase> aber
						praktisch sein.
					</para>
				</listitem>
			</varlistentry>
		</variablelist>
		
		<para>
			Klicken Sie nun auf die Schaltfläche <guibutton>Add template
			set</guibutton>, um das <foreignphrase>Template Set</foreignphrase>
			anzulegen.
		</para>
	</sect1>
	
	<sect1 id="crash_course.create_pages">
		<title>Seiten anlegen</title>
		
		<para>
			Nachdem das erste <foreignphrase>Template Set</foreignphrase>
			angelegt wurde, kann mit der eigentlichen Arbeit begonnen werden.
			Zuerst muss die erste und einzige Navigation angelegt
			werden. Klicken Sie dazu auf den Navigationspunkt
			<guibutton>Contents</guibutton> und dann auf den Menüpunkt
			<guibutton>Navigations</guibutton>. Von dort aus gelangen Sie über
			den Link <guibutton>Add new</guibutton> zur Eingabemaske, um 
			eine Navigation zu erzeugen.
		</para>
		
		<variablelist>
			<varlistentry>
				<term>Name</term>
				<listitem>
					<para>
						Geben Sie in das Feld <guilabel>Name</guilabel> einen
						Namen für die Navigation ein an. Wählen Sie einen
						möglichst beschreibenden Namen wie
						<userinput>Hauptnavigation</userinput>. 
					</para>
				</listitem>
			</varlistentry>
		</variablelist>
		
		<para>
			Klicken Sie dann auf die Schaltfläche <guibutton>Add
			navigation</guibutton>, um die Navigation anzulegen.
		</para>
		
		<para>
			Um die vier Seiten Startseite, Inhalt, Kontakt und Impressum
			anzulegen, müssen Sie zum Abschnitt <guibutton>Pages</guibutton>
			wechseln. Dort sollten Sie bereits die &ndash; noch leere &ndash;
			Hauptnavigation sehen. Lassen Sie sich dabei von der Warnung
			<foreignphrase>Please define an index page!</foreignphrase> nicht
			verwirren; sie verschwindet, sobald die erste Seite angelegt wurde.
			Über das grüne Symbol unter der Überschrift <guilabel>Add</guilabel>
			gelangen Sie zur Eingabemaske, um die Seiten anzulegen. Wir
			beginnen mit der Seite <guilabel>Startseite</guilabel>.
		</para>
		
		<variablelist>
			<varlistentry>
				<term>Position</term>
				<listitem>
					<para>
						Die Position bestimmt, wie die neue Seite in
						Relation zum Menüpunkt, neben dem der Anwender auf
						das Symbol zum Hinzufügen einer Seite geklickt hat,
						in die Navigation eingefügt wird. Belassen Sie die
						Auswahl bei der Option <guimenuitem>Create node
						below</guimenuitem>.
					</para>
				</listitem>
			</varlistentry>
			<varlistentry>
				<term>Name</term>
				<listitem>
					<para>
						Geben Sie hier die Beschriftung des Menüpunkts ein,
						also <userinput>Startseite</userinput>.
					</para>
				</listitem>
			</varlistentry>
			<varlistentry>
				<term>Type</term>
				<listitem>
					<para>
						Der Seitentyp bestimmt, welche Inhalte in der Seite
						gespeichert werden können. Da es sich um eine Seite
						handelt, die nur aus Fliesstext besteht, wählen
						Sie <guimenuitem>OAK_SIMPLE_PAGE</guimenuitem> aus.
					</para>
				</listitem>
			</varlistentry>
			<varlistentry>
				<term>Template set</term>
				<listitem>
					<para>
						Mit dem <foreignphrase>Template Set</foreignphrase> wird
						bestimmt, welche Vorlagen zur Anzeige der Seite
						verwendet werden sollen. Wählen Sie hier das
						<foreignphrase>Template Set</foreignphrase> aus,
						das wir im <xref linkend="crash_course.preparation"/>
						angelegt haben, also
						<userinput>Standardaussehen</userinput>.
					</para>
				</listitem>
			</varlistentry>
			<varlistentry>
				<term>Index page</term>
				<listitem>
					<para>
						Setzen Sie hier einen Haken, um festzulegen, dass die
						<userinput>Startseite</userinput> als erste Seite
						angezeigt werden soll, wenn Ihre Homepage aufgerufen
						wird.
					</para>
				</listitem>
			</varlistentry>
		</variablelist>
		
		<para>
			Die Felder <guilabel>Protect</guilabel> und
			<guilabel>Groups</guilabel> benötigen wir zur Umsetzung der
			Demo-Webseite nicht, darum können sie vorerst beiseite gelassen
			werden. Klicken Sie jetzt auf <guibutton>Add page</guibutton>, 
			um die Seite hinzuzufügen. Sie kommen dann zur Seitenübersicht
			zurück und sollten die <userinput>Startseite</userinput> als
			erste Seite in der Hauptnavigation sehen.
		</para>
		
		<para>
			Nun muss für die Seite Inhalte die Prozedur wiederholt werden.
			Klicken Sie wieder auf das grüne Symbol unter der
			Spaltenüberschrift <guilabel>Add</guilabel> in der Zeile der
			Seite <userinput>Startseite</userinput>. Sie kommen wieder
			zur Eingabemaske. Belassen Sie das Feld
			<guilabel>Position</guilabel> wieder in der Standard-Auswahl
			<guimenuitem>Create node below</guimenuitem>. Geben Sie beim
			Feld <guilabel>Name</guilabel> den Namen der Seite, als 
			<userinput>Inhalte</userinput> ein. Wählen Sie bei
			<guilabel>Type</guilabel> wiederum den Seiten-Typ
			<guimenuitem>OAK_SIMPLE_PAGE</guimenuitem> aus und bei
			<guilabel>Template set</guilabel> unser 
			<foreignphrase>Template Set</foreignphrase>
			<userinput>Standardaussehen</userinput>. Die restlichen Felder
			können Sie so belassen, wie sie sind.
		</para>
		
		<warning>
			<para>
				Setzen Sie keinen Haken mehr beim Feld
				<guilabel>Index page</guilabel>. Pro Webseite kann es nur
				eine <foreignphrase>Index page</foreignphrase> geben und
				dies ist schon die Seite <userinput>Startseite</userinput>.
			</para>
		</warning>
		
		<para>
			Nach dem Klick auf die Schaltfläche <guibutton>Add page</guibutton>
			gelangen Sie wieder auf die Seitenübersicht. Sie sehen nun 
			die Seite <userinput>Inhalte</userinput> unter der Seite
			<userinput>Startseite</userinput>, allerdings um eine Ebene
			eingerückt. Um sie auszurücken, klicken Sie auf der Zeile
			der Seite <userinput>Inhalte</userinput> unter
			<guilabel>Move</guilabel> auf den Pfeil nach unten. 
		</para>
		
		<para>
			Für das Kontakt-Formular und das Impressum muss die ganze
			Prozedur noch je einmal wiederholt werden. Achten Sie beim
			Kontakt-Formular darauf, als Seitentyp
			<guimenuitem>OAK_SIMPLE_FORM</guimenuitem> auszuwählen.
		</para>
		
		<figure id="crash_course.create_pages.created_pages">
			<title>Angelegte Seiten</title>
			<graphic fileref="images/crash_course.create_pages.created_pages.png"/>
		</figure>
	</sect1>
	
	<sect1 id="crash_course.fill_homepage_with_contents">
		<title>Startseite mit Inhalten füllen</title>
		
		<para>
			Jetzt ist es Zeit, die Startseite mit Inhalten zu befüllen.
			Suchen Sie dazu in der Navigationsstruktur nach der Zeile
			mit dem Eintrag <userinput>Startseite</userinput> und klicken
			Sie daneben auf das Symbol in der Spalte <guilabel>Edit</guilabel>.
			Sie gelangen damit zur Eingabemaske.
		</para>
		
		<variablelist>
			<varlistentry>
				<term>Title</term>
				<listitem>
					<para>
						Dieses Feld bestimmt den Seitentitel. Standardmässig
						wird der Name des Navigationspunkts, in diesem Fall
						also <userinput>Startseite</userinput> verwendet.
						Ersetzen Sie ihn nun durch
						<userinput>Willkommen zur Demo!</userinput>.
					</para>
				</listitem>
			</varlistentry>
			<varlistentry>
				<term>Content</term>
				<listitem>
					<para>
						Hier kommt der Fliesstext für die Seite hinein. Fügen
						Sie ein paar Zeilen Beispieltext wie 
						<ulink url="http://lipsum.com/">Lorem Ipsum</ulink> ein
						&ndash; zwei Abschnitte sind eine gute Wahl.
					</para>
				</listitem>
			</varlistentry>
			<varlistentry>
				<term>Text converter</term>
				<listitem>
					<para>
						Wählen Sie aus der Liste den Eintrag
						<guimenuitem>Textile</guimenuitem> aus.
					</para>
				</listitem>
			</varlistentry>
			<varlistentry>
				<term>Apply text macros</term>
				<listitem>
					<para>
						Setzen Sie hier einen Haken in die Checkbox.
					</para>
				</listitem>
			</varlistentry>
		</variablelist>
		
		<para>
			Das Feld <guilabel>Custom meta tags</guilabel> können Sie für
			den Moment ignorieren und auf die Schaltfläche 
			<guibutton>Update page</guibutton> klicken. Die Inhalte werden
			nun gespeichert und Sie wieder zur Seitenübersicht weitergeleitet.
		</para>
		
		<para>
			Wenn Sie nun den öffentlichen Bereich von Oak aufrufen, werden
			Sie sehen, dass noch keine Inhalte angezeigt werden, sondern
			eine Fehlermeldung. Dies liegt daran, dass noch keine Vorlage
			vorhanden ist, was im
			<xref linkend="crash_course.connect_homepage_with_template"/> behoben wird.
		</para>
	</sect1>
	
	<sect1 id="crash_course.connect_homepage_with_template">
		<title>Startseite mit Vorlage verbinden</title>
		
		<para>
			Um die Startseite mit einer Vorlage zu verbinden, müssen Sie in den
			Bereich <guibutton>Templating</guibutton> wechseln und zwar zum
			Unterabschnitt <guibutton>Templates</guibutton>. Klicken Sie dann
			auf <guibutton>Add new</guibutton>, um zur Eingabemaske zum
			Anlegen einer Vorlage zu gelangen. Diese muss nun befüllt werden.
		</para>
		
		<variablelist>
			<varlistentry>
				<term>Type</term>
				<listitem>
					<para>
						Dient zur Zuordnung des Vorlagen-Typs. Wählen Sie
						den Eintrag <guimenuitem>simple_page_index</guimenuitem>
						aus.
					</para>
				</listitem>
			</varlistentry>
			<varlistentry>
				<term>Name</term>
				<listitem>
					<para>
						Name der Vorlage. Dient zur späteren Identifizierung
						derselben. Geben Sie einen beschreibenden Namen wie
						<userinput>Vorlage Startseite</userinput> ein.
					</para>
				</listitem>
			</varlistentry>
			<varlistentry>
				<term>Description</term>
				<listitem>
					<para>
						Hier können sie optional den Zweck der Vorlage
						beschreiben.
					</para>
				</listitem>
			</varlistentry>
			<varlistentry>
				<term>Content</term>
				<listitem>
					<para>
						In dieses Feld gehört der HTML-Code für die Vorlage.
						Öffnen Sie die Datei <filename>index.html</filename>
						aus dem Demo-Webseiten-Paket, das Sie von unserem
						Download-Server heruntergeladen haben, und kopieren
						Sie den gesamten HTML-Code in das Textfeld.
					</para>
				</listitem>
			</varlistentry>
			<varlistentry>
				<term>Sets</term>
				<listitem>
					<para>
						Mit diesem Feld wird die Vorlage einem Vorlagen-Set
						zugeordnet. Klicken Sie auf die Option 
						<guimenuitem>Standardaussehen</guimenuitem>.
					</para>
				</listitem>
			</varlistentry>
		</variablelist>
		
		<para>
			Klicken Sie nun auf die Schaltfläche
			<guibutton>Add template</guibutton>,um die Vorlage zu speichern.
			Wenn Sie jetzt den öffentlichen Bereich aufrufen, werden Sie jetzt
			den gerenderten HTML-Code sehen, den Sie soeben in die Vorlage
			eingefügt haben &ndash; allerdings ohne Bilder und Style
			Sheets.
		</para>
		
		<para>
			Nun geht es darum, dass die Inhalte angezeigt werden, die vorher
			in der Datenbank abgelegt wurden. Gehen Sie dazu zur
			Vorlagen-Übersicht zurück und klicken Sie beim soeben angelegten
			Template auf das Symbol unter der Überschrift 
			<guilabel>Edit</guilabel>. Sie kommen dann wieder zur Eingabemaske
			zurück.
		</para>
		
		<para>
			Zuerst wird der Title-Tag geändert. Er soll statt
			<userinput>Welcompose - Hello World!</userinput> zuerst den
			Namen des aktuellen Navigationspunkts und dann den Webseiten-Namen
			enthalten. Ersetzen Sie dazu den Title-Tag durch folgenden Code:
		</para>
		
		<programlisting language="smarty"><![CDATA[
<title>{$page.name} &ndash; Demo-Webseite</title>
]]></programlisting>

		<para>
			Wenn Sie nun auf die Schaltfläche <guibutton>Update
			template</guibutton> klicken, wird die Vorlage gespeichert und Sie
			können die Ausgabeseite neu laden. Wenn Sie alles richtig gemacht
			haben, wird als Seitentitel <computeroutput>Startseite &ndash;
			Demo-Webseite</computeroutput> angezeigt.
		</para>
		
		<para>
			Ändern wir nun Titel und Fliesstext. Ersetzen Sie den H1-Tag durch
			den Seitentitel und den Fliesstext, indem Sie den Bereich von
			<code><![CDATA[<div id="content">]]></code> bis zum Kommentar
			<code><![CDATA[<!-- content -->]]></code> durch folgenden Code
			austauschen:
		</para>
		
		<programlisting language="smarty"><![CDATA[
<div id="content">
	<h1>{$simple_page.title}</h1>
	{$simple_page.content}
<!-- content --></div>
]]></programlisting>

		<para>
			Wenn Sie nun die Vorlage wieder speichern und die Ausgabe neu
			laden, sollten Sie als Überschrift den Seitentitel und als
			Inhalt den Fliesstext sehen, die Sie vor kurzem in die Datenbank
			eingefügt haben. 
		</para>
		
		<para>
			Jetzt gilt es noch dafür zu sorgen, dass die Navigation von
			Oak erzeugt wird. Ersetzen Sie dazu die Liste in
			<code><![CDATA[<div id="navi">]]></code> durch folgenden Code:
		</para>
		
		<programlisting language="smarty"><![CDATA[
<ul>
{select_named ns="Content" class="Page" method="selectPages" var="pages"}
{foreach from=$pages item=_page}
	{if $_page.id == OAK_CURRENT_PAGE}
		<li class="on">{$_page.name}</li>
	{else}
		<li><a href="{get_url page_id=$_page.id}">{$_page.name}</a></li>
	{/if}
{/foreach}
</ul>
]]></programlisting>

		<para>
			Nachdem Sie die Vorlage wieder gespeichert haben, können Sie
			die Ausgabeseite nochmals laden, worauf jetzt auch die Navigation
			von Oak erzeugt wird. Jetzt ist es Zeit, Style Sheets und Logos
			einzubinden, was im <xref linkend="crash_course.style_homepage"/>
			geschieht.
		</para>
		
		<figure id="crash_course.connect_homepage_with_template.end_result">
			<title>Vorlage mit Inhalten aus Datenbank</title>
			<graphic fileref="images/crash_course.connect_homepage_with_template.end_result.png"/>
		</figure>
	</sect1>
	
	<sect1 id="crash_course.style_homepage">
		<title>Logos und Style Sheets einbinden</title>
		
		<para>
			Wie die Vorlagen müssen auch Style Sheets über die Admin-Oberfläche
			verwaltet werden. Um das Style Sheet für die Demo-Seite zu
			integrieren, müssen Sie zum Unterabschnitt <guibutton>Global
			Templates</guibutton> wechseln. Klicken Sie dort auf
			<guibutton>Add new</guibutton>, um zur Eingabemaske zu gelangen
		</para>
		
		<variablelist>
			<varlistentry>
				<term>Name</term>
				<listitem>
					<para>
						Geben Sie hier den Namen des Style Sheets an. Da das 
						Style Sheet in den Vorlagen über den Namen referenziert
						wird, empfiehlt es sich, "Dateinamen" wie
						<filename>style.css</filename> zu verwenden.
					</para>
				</listitem>
			</varlistentry>
			<varlistentry>
				<term>Description</term>
				<listitem>
					<para>
						Hier können Sie eine optionale Beschreibung für
						die Style-Sheet-Datei eingeben.
					</para>
				</listitem>
			</varlistentry>
			<varlistentry>
				<term>Content</term>
				<listitem>
					<para>
						Kopieren Sie in dieses Feld die Inhalte der
						<filename>oak1.css</filename> hinein.
					</para>
				</listitem>
			</varlistentry>
			<varlistentry>
				<term>MIME Type</term>
				<listitem>
					<para>
						Wählen Sie den Eintrag
						<guimenuitem>text/css</guimenuitem> aus der Liste
						aus.
					</para>
				</listitem>
			</varlistentry>
			<varlistentry>
				<term>Change delimiter</term>
				<listitem>
					<para>
						Setzen Sie einen Haken, da sonst die geschweiften
						Klammern in den Style Sheets vor Fehler sorgen.
					</para>
				</listitem>
			</varlistentry>
		</variablelist>
		
		<para>
			Klicken Sie nun auf die Schaltfläche <guibutton>Add global
			template</guibutton>, um die CSS-Datei zu speichern.
		</para>
		
		<para>
			Nun kann die CSS-Datei mit der Vorlage verknüpft werden.
			Gehen Sie dazu wieder zurück zur Eingabemaske für die
			Vorlage, die Sie vorher angelegt haben. Suchen Sie nach der
			Referenzierung der Style-Sheet-Datei:
		</para>
		
		<programlisting language="smarty"><![CDATA[
<link type="text/css" rel="stylesheet" href="styles/oak1.css" media="screen, projection" />
]]></programlisting>

		<para>
			Löschen Sie nun die Referenz auf die Datei
			<filename>styles/oak1.css</filename> und platzieren Sie den
			Cursor zwischen den Anführungszeichen. Klicken Sie nun auf
			den Link <guibutton>Reference Global Template</guibutton> über
			dem Textfeld. Es öffnet sich ein Pop-up, in dem die bisher
			angelegten Global Files gelistet werden. Klicken Sie auf die
			soeben angelegte <filename>style.css</filename>, worauf sich das
			Pop-up schliesst und der Code 
			<code>{global_template name="style.css"}</code> als
			Style-Sheet-Referenz eingefügt wird. Die gesamte Anweisung
			sieht nun so aus:
		</para>
		
		<programlisting language="smarty"><![CDATA[
<link type="text/css" rel="stylesheet" href="{global_template name="style.css"}"
	media="screen, projection" />
]]></programlisting>

		<para>
			Speichern Sie die Vorlage und aktualisieren Sie die Ausgabeseite.
			Wenn Sie alles richtig gemacht haben, sollten die Inhalte jetzt
			"gestylt" sein (siehe
			<xref linkend="crash_course.style_homepage.styled_homepage"/>).
		</para>
		
		<figure id="crash_course.style_homepage.styled_homepage">
			<title>Startseite mit verknüpftem Style Sheet</title>
			<graphic fileref="images/crash_course.style_homepage.styled_homepage.png"/>
		</figure>
	</sect1>
</chapter>