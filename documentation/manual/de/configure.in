AC_INIT(Makefile.in)

XSLTPROC=xsltproc
XMLLINT=xmllint
FOP=fop

AC_ARG_WITH(xsltproc, AC_HELP_STRING([--with-xsltproc],[Path to xsltproc]),
	[
		if test -x "$withval" ; then
			XSLTPROC="$withval"
		fi
	]
)
AC_PATH_PROG(XSLTPROC, $XSLTPROC)

AC_ARG_WITH(xmllint, AC_HELP_STRING([--with-xmllint],[Path to xmllint]),
	[
		if test -x "$withval" ; then
			XMLLINT="$withval"
		fi
	]
)
AC_PATH_PROG(XMLLINT,  $XMLLINT)

AC_ARG_WITH(fop, AC_HELP_STRING([--with-fop],[Path to Apache FOP executable (shell script, batch file)]),
	[
		if test -x "$withval" ; then
			FOP="$withval"
		fi
	]
)
AC_PATH_PROG(FOP,  $FOP)

AC_SUBST(XSLTPROC)
AC_SUBST(XMLLINT)
AC_SUBST(FOP)
AC_OUTPUT(Makefile)

cat > config.nice <<EOT
#!/bin/sh
./configure \
    --with-xsltproc='$XSLTPROC' \
    --with-xmllint='$XMLLINT'
    --with-fop='$FOP'

EOT
chmod +x config.nice

